<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAK-ADSB Setup</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üõ©Ô∏è TAK-ADSB-Feeder</h1>
            <p>Setup Wizard</p>
        </header>

        <div class="wizard">
            <!-- Step 1: Location -->
            <div class="step active" id="step1">
                <h2>Step 1: Location</h2>
                <p>Enter your receiver location</p>
                
                <div class="form-group">
                    <label>Latitude</label>
                    <input type="number" step="any" id="lat" placeholder="33.5539" value="{{ config.get('FEEDER_LAT', '') }}">
                </div>
                
                <div class="form-group">
                    <label>Longitude</label>
                    <input type="number" step="any" id="lon" placeholder="-117.2139" value="{{ config.get('FEEDER_LONG', '') }}">
                </div>
                
                <div class="form-group">
                    <label>Altitude (meters)</label>
                    <input type="number" id="alt" placeholder="304" value="{{ config.get('FEEDER_ALT_M', '') }}">
                </div>
                
                <div class="form-group">
                    <label>Timezone</label>
                    <input type="text" id="tz" placeholder="America/Los_Angeles" value="{{ config.get('FEEDER_TZ', 'UTC') }}">
                </div>
                
                <div class="form-group">
                    <label>Feeder Name</label>
                    <input type="text" id="site_name" placeholder="MyFeeder" value="{{ config.get('MLAT_SITE_NAME', '') }}">
                </div>
                
                <button class="btn btn-primary" onclick="nextStep(2)">Next ‚Üí</button>
            </div>

            <!-- Step 2: TAK Server -->
            <div class="step" id="step2">
                <h2>Step 2: TAK Server</h2>
                <p>Configure your TAK aggregator (optional)</p>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="tak_enabled" {{ 'checked' if config.get('TAK_ENABLED') == 'true' else '' }}>
                        Enable TAK Server Feed
                    </label>
                </div>
                
                <div class="form-group">
                    <label>TAK Server Host/IP</label>
                    <input type="text" id="tak_host" placeholder="104.225.219.254" value="{{ config.get('TAK_SERVER_HOST', '') }}">
                </div>
                
                <div class="form-group">
                    <label>TAK Server Port</label>
                    <input type="number" id="tak_port" value="{{ config.get('TAK_SERVER_PORT', '30004') }}">
                </div>
                
                <button class="btn" onclick="prevStep(1)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextStep(3)">Next ‚Üí</button>
            </div>

            <!-- Step 3: Aggregators -->
            <div class="step" id="step3">
                <h2>Step 3: Aggregators</h2>
                <p>Enable additional aggregator feeds</p>
                
                <div class="aggregator-card">
                    <h3>FlightRadar24</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="fr24_enabled" {{ 'checked' if config.get('FR24_ENABLED') == 'true' else '' }}>
                            Enable FR24
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Sharing Key</label>
                        <input type="text" id="fr24_key" placeholder="Your FR24 key" value="{{ config.get('FR24_SHARING_KEY', '') }}">
                    </div>
                </div>
                
                <div class="aggregator-card">
                    <h3>ADS-B Exchange</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="adsbx_enabled" {{ 'checked' if config.get('ADSBX_ENABLED') == 'true' else '' }}>
                            Enable ADSBX
                        </label>
                    </div>
                    <div class="form-group">
                        <label>UUID</label>
                        <input type="text" id="adsbx_uuid" placeholder="Your ADSBX UUID" value="{{ config.get('ADSBX_UUID', '') }}">
                    </div>
                </div>
                
                <div class="aggregator-card">
                    <h3>Airplanes.Live</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="airplaneslive_enabled" {{ 'checked' if config.get('AIRPLANESLIVE_ENABLED') == 'true' else '' }}>
                            Enable Airplanes.Live
                        </label>
                    </div>
                    <div class="form-group">
                        <label>UUID</label>
                        <input type="text" id="airplaneslive_uuid" placeholder="Your UUID" value="{{ config.get('AIRPLANESLIVE_UUID', '') }}">
                    </div>
                </div>
                
                <button class="btn" onclick="prevStep(2)">‚Üê Back</button>
                <button class="btn btn-success" onclick="saveAndStart()">Save & Start üöÄ</button>
            </div>
        </div>

        <div id="status"></div>
    </div>

    <script src="/static/js/setup.js"></script>
</body>
</html>
